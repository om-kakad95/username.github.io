<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JEE Main - Mock Test Interface (NTA style)</title>
  <style>
    :root{
      --bg:#f7f7f9; --accent:#6c63ff; --green:#33a24a; --orange:#d35400; --purple:#6b2bd9; --muted:#9aa0a6; --card:#ffffff;
    }
    body{margin:0;font-family:Inter,Segoe UI,Arial,sans-serif;background:var(--bg);color:#222}
    .container{max-width:1200px;margin:16px auto;padding:12px}
    .header{display:flex;align-items:center;justify-content:space-between;background:var(--card);padding:12px;border-radius:8px;box-shadow:0 2px 8px rgba(20,20,20,0.06)}
    .user{display:flex;gap:18px;align-items:center}
    .avatar{width:48px;height:48px;border-radius:50%;background:#e9ecef;display:flex;align-items:center;justify-content:center;color:#7a7a7a;font-weight:600}
    .meta{font-size:14px}
    .timer{background:#eef3ff;color:var(--accent);padding:8px 12px;border-radius:18px;font-weight:700}

    .tabs{display:flex;gap:8px;margin-top:12px}
    .tab{background:var(--card);padding:8px 12px;border-radius:6px;border:1px solid #eee;cursor:pointer}
    .tab.active{background:linear-gradient(90deg,#f4f7ff,#fff);border-color:#e0e6ff}

    .main{display:grid;grid-template-columns:1fr 300px;gap:14px;margin-top:14px}
    .question-card{background:var(--card);padding:18px;border-radius:8px;box-shadow:0 4px 18px rgba(15,15,15,0.04);min-height:520px;position:relative}
    .q-header{display:flex;align-items:center;gap:12px;margin-bottom:8px}
    .q-num{font-weight:700}
    .q-info{display:flex;gap:10px;align-items:center}
    .badge{background:#f1f1f1;padding:6px 8px;border-radius:20px;font-size:13px}
    .q-body{font-size:20px;line-height:1.4;margin-top:8px}

    .options{margin-top:18px}
    .option{display:flex;align-items:flex-start;gap:10px;padding:10px;border-radius:8px;border:1px solid #f0f0f0;margin-bottom:8px;cursor:pointer}
    .option input{margin-top:3px}

    /* bottom controls */
    .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:18px}
    .btn{padding:10px 14px;border-radius:6px;border:none;cursor:pointer}
    .btn.green{background:var(--green);color:#fff}
    .btn.blue{background:#2b78f6;color:#fff}
    .btn.orange{background:#ff9f1a;color:#fff}
    .btn.ghost{background:#f5f5f7;border:1px solid #eee}

    /* right side palette */
    .sidebar{position:relative}
    .legend{display:flex;gap:8px;align-items:center;margin-bottom:12px}
    .legend .item{display:flex;gap:6px;align-items:center;font-size:13px}
    .dot{width:18px;height:18px;border-radius:4px;display:inline-block}
    .dot.green{background:var(--green)}
    .dot.orange{background:var(--orange)}
    .dot.grey{background:#d6d6d6}
    .dot.purple{background:var(--purple)}
    .palette{background:var(--card);padding:12px;border-radius:8px;box-shadow:0 4px 10px rgba(20,20,20,0.05);min-height:520px}
    .grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px}
    .cell{background:#fff;border-radius:6px;padding:10px;text-align:center;border:1px solid #eee;cursor:pointer}
    .cell.not-visited{background:#fff}
    .cell.not-answered{background:var(--orange);color:#fff}
    .cell.answered{background:var(--green);color:#fff}
    .cell.marked{background:var(--purple);color:#fff}
    .cell.ans-marked{background:#5aa0ff;color:#fff}

    /* submit area */
    .submit-area{position:sticky;bottom:12px;margin-top:12px}

    /* overlay popup */
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.45);backdrop-filter:blur(3px);display:flex;align-items:center;justify-content:center;z-index:999}
    .popup{background:#fff;padding:18px;border-radius:10px;max-width:480px;box-shadow:0 12px 40px rgba(0,0,0,0.25)}
    .popup h3{margin:0 0 8px}
    .popup p{color:#333}
    .popup .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:14px}

    /* small helper */
    .small{font-size:13px;color:var(--muted)}

    /* responsive */
    @media(max-width:900px){.main{grid-template-columns:1fr}
      .sidebar{order:2}
      .palette{margin-top:12px}
    }

    /* RESULT MODAL FIX */
    #result{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.45);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:9999;
    }

    /* allow newlines in score box */
    #scoreBox{white-space:pre-line}
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div class="user">
        <div class="avatar">OK</div>
        <div>
          <div class="meta"><strong>Candidate Name</strong> : Om Kakad</div>
          <div class="small"><strong>Test Name</strong> : Practice Test 01</div>
        </div>
      </div>
      <div style="display:flex;gap:12px;align-items:center">
        <div class="timer" id="timer">02:59:00</div>
        <button class="btn ghost" onclick="viewInstructions()">View Instructions</button>
      </div>
    </div>

    <div class="tabs">
      <div class="tab active">Physics</div>
      <div class="tab">Chemistry</div>
      <div class="tab">Maths</div>
    </div>

    <div class="main">
      <div class="question-card">
        <div class="q-header">
          <div class="q-num">Question <span id="qIndex">1</span> :</div>
          <div class="q-info">
            <div class="badge">Marks: +4 -1</div>
            <div class="badge">Type: Single</div>
          </div>
        </div>

        <div class="q-body" id="questionText">Question will appear here</div>

        <div class="options" id="options"></div>

        <div class="controls">
          <button class="btn green" onclick="saveAndNext()">SAVE & NEXT</button>
          <button class="btn ghost" onclick="clearResponse()">CLEAR</button>
          <button class="btn blue" onclick="saveMarkForReview()">SAVE & MARK FOR REVIEW</button>
          <button class="btn orange" onclick="markForReviewNext()">MARK FOR REVIEW & NEXT</button>
          <div style="flex:1"></div>
          <button class="btn ghost" onclick="prevQ()">&lt; BACK</button>
          <button class="btn ghost" onclick="nextQ()">NEXT &gt;</button>
        </div>

        <div class="submit-area">
          <button class="btn" onclick="submitTest()" style="background:#12b886;color:#fff;border:none;padding:10px 18px;border-radius:8px">SUBMIT</button>
        </div>
      </div>

      <div class="sidebar">
        <div class="palette">
          <div class="legend">
            <div class="item"><span class="dot green"></span> Answered</div>
            <div class="item"><span class="dot orange"></span> Not Answered</div>
            <div class="item"><span class="dot grey"></span> Not Visited</div>
            <div class="item"><span class="dot purple"></span> Mark for review</div>
          </div>

          <div class="grid" id="paletteGrid"></div>

          <div style="margin-top:12px" class="small">Answered & Marked for Revision will be considered for evaluation</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay / Warning popup (hidden by default) -->
  <div id="overlay" class="overlay" style="display:none">
    <div class="popup">
      <h3>Warning</h3>
      <p>Exiting full-screen mode or switching tab during the test isn't allowed.<br/>Are you sure you want to leave the test?</p>
      <div class="actions">
        <button class="btn ghost" onclick="leaveTest()">Leave Test</button>
        <button class="btn blue" onclick="continueTest()">Continue</button>
      </div>
    </div>
  </div>

  <!-- Result Modal -->
  <div id="result" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.45);align-items:center;justify-content:center;z-index:9999">
    <div style="background:#fff;padding:20px;border-radius:10px;max-width:520px;margin:auto;text-align:center">
      <h2>Test Submitted</h2>
      <div id="scoreBox" style="font-size:18px;margin-top:12px"></div>
      <div style="margin-top:14px"><button class="btn ghost" onclick="closeResult()">Close</button></div>
    </div>
  </div>

  <script>
    // sample questions (edit / replace as needed)
     const questions = [
     {q:"Let a1, a2, a3,… be a G.P. of increasing positive terms. If a1a5 = 28 and a2 + a4 = 29, then a6 is equal to:",o:["628","812","526","784"], ans:3 },
     {q:"Let x = x(y) be solution of 2dx + (x − 1/y)dy = 0, x(1)=1. Then x(1/2) is:",o:["1/2+e","3+e","3−e","2+e"], ans:2 },
     {q:"Two balls are drawn without replacement from 4 white and 6 black balls. If P(first black | second black)=m/n, find m+n:",o:["4","14","13","11"], ans:1 },
     {q:"Product of all solutions of e^(2x)+e^(−2x)=6 is:",o:["1/4","1/8","e","2"], ans:0 },
     {q:"Triangle reflected in line x+2y=2 has centroid (α,β). Find 15(α−β):",o:["19","15","21","22"], ans:3 },
     {q:"If f(x)=7tan⁸x+7tan⁶x−3tan⁴x−3tan²x, find 7I1+12I2:",o:["2π","1/2","π/2","π"], ans:1 },
     {q:"Parabola y=x²+px−3 cuts axes, circle passes through intercepts. Area of triangle is:",o:["7/4","6/5","21/22","5"], ans:2 },
     {q:"Which point lies on shortest distance line between given skew lines?",o:["(14/3,−3,22/3)","(−5/3,−7,1)","(2,3,1/3)","(8/3,−1,1/3)"], ans:0 },
     {q:"If f(x+y)=f(x)f'(y)+f'(x)f(y), f(0)=1. Find Σ log f(n):",o:["2525","5220","2384","2406"], ans:0 },
     {q:"Five letters arranged alphabetically. Middle letter is M. Number of ways:",o:["2525","5220","2384","2406"], ans:0 },
     {q:"Sum of max and min of 16[(sec⁻¹x)²+(cosec⁻¹x)²]:",o:["24π²","22π²","31π²","18π²"], ans:1 },
     {q:"If f''−3af'−f=0 and f(x+y)=f(x)f(y), area is:",o:["e²−1","e²+1","e⁴+1","e⁴−1"], ans:0 },
     {q:"Area inside circle (x−2√3)²+y²=12 and outside y²=2√3x:",o:["3π+8","6π−16","3π−8","6π−8"], ans:1 },
     {q:"Hyperbola with foci (1,14),(1,−12) passes through (1,6). Latus rectum:",o:["1/4","1/2","π/2","24/5"], ans:3 },
     {q:"Limit of given series is:",o:["0","1/2","1","e"], ans:1 },
     { q:"Coin tossed thrice. X=number of times tail follows head. Find 64(μ+σ²):",o:["32","64","48","8"], ans:3 },
     {q:"Number of non-empty equivalence relations on {1,2,3}:",o:["6","5","7","4"], ans:1 },
     {q:"Circle touches both axes in 2nd quadrant. Possible r interval width:",o:["10","12","14","15"], ans:1 },
     {q:"Given set B={m/n}. Find n(B):",o:["36","31","37","29"], ans:1 },
     {q:"Given complex numbers on unit circle. Find α+β:",o:["24","29","41","31"], ans:1 },
     {q:"Electron enters parallel plates. Vertical velocity is:",o:["0","6×10⁴","1×10⁶","1×10⁵"], ans:2 },
     {q:"Equivalent emf & resistance of parallel batteries. Correct statement:",o:["Both false","I false II true","Both true","I true II false"], ans:1 },
     {q:"Moment of inertia of disc after removing R/2 part:",o:["7/32MR²","9/32MR²","17/32MR²","13/32MR²"], ans:3 },
     {q:"Work required to convert ice to steam:",o:["3043 J","3024 J","3003 J","3022 J"], ans:0 },
     {q:"Ratio of de Broglie wavelengths (excited/ground):",o:["3","16","9","4"], ans:3 },
     {q:"Ratio of KE at two points in vertical circular motion:",o:["1","2","4","3"], ans:1 },
     {q:"Object distance for image on itself (polished lens):",o:["R/μ","R/(2μ−3)","μR","R/(2μ−1)"], ans:3 },
     {q:"Forward biased diode circuits:",o:["A&D","B,D,E","C&E","B,C,E"], ans:3 },
     {q:"Current in potentiometer circuit:",o:["0.9 A","1.35 A","0.3 A","1.0 A"], ans:3 },
     {q:"Gravitational force ratio after removing sphere:",o:["12:11","11:10","12:9","16:9"], ans:0 },
     {q:"Length of open organ pipe:",o:["15/7 cm","20/7 cm","15/9 cm","20/9 cm"], ans:3 },
     {q:"Dimensions of B/μ₀:",o:["MLT⁻²A⁻¹","ML²T⁻²A⁻¹","L⁻¹AT⁻²","LT⁻²A⁻¹"], ans:2 },
     {q:"Electric flux through cube:",o:["λa/2ε₀","λa/4ε₀","λa/8ε₀","λa/16ε₀"], ans:3 },
     {q:"Vernier statements:",o:["I true","II true","Both false","Both true"], ans:2 },
     {q:"Photoelectric effect possible for:",o:["Both","None","Cs only","Li only"], ans:2 },
     {q:"Radiation from bigger sphere:",o:["16E","E","64E","256E"], ans:1 },
     {q:"Power of lens combination:",o:["Option1","Option2","Option3","Option4"], ans:3 },
     {q:"YDSE in denser medium:",o:["A true R false","Both true wrong","Both true correct","A false"], ans:2 },
     {q:"Extra charge & energy change in capacitor:",o:["4mC,0.2J","8mC,2J","2mC,0.4J","2mC,0.2J"], ans:0 },
     {q:"Best resistivity vs temperature curve:",o:["1","2","3","4"], ans:3 },
     {q:"100a for convex mirror problem:",o:["6","8","10","12"], ans:1 },
     {q:"Radius of curvature of soap bubble surface:",o:["2","4","6","8"], ans:3 },
     {q:"Angular momentum value:",o:["60","90","120","150"], ans:1 },
     {q:"Thermal steady state temperature:",o:["20","30","40","50"], ans:2 },
     {q:"Projectile height ratio:",o:["3","4","5","6"], ans:2 },
     {q:"Radius of He⁺ first excited state:",o:["4a₀","2a₀","a₀/2","a₀/4"], ans:1 },
     {q:"Incorrect geometrical isomerism statements:",o:["A&E","A,D,E","B,C","C,D,E"], ans:1 },
     {q:"Thermodynamic parameters on stirring:",o:["ΔU<0","ΔU=0","ΔU>0","q<0"], ans:2 },
     {q:"Incorrect electronegativity order:",o:["Mg<Be<B<N","S<Cl<O<F","Al<Si<C<N","Al<Mg<B<N"], ans:3 },
     {q:"4f⁷ configuration ions:",o:["A&D","B&C","A&B","B&E"], ans:2 },
     {q:"Propyne + Na reactions:",o:["I false","Both true","I true","Both false"], ans:2 },
     {q:"Positive Fehling test compounds:",o:["A,D,E","C,D,E","A,C,D","A,B,C"], ans:1 },
     {q:"Electrolyte for H₂O₂:",o:["Na₂SO₄","Acidified Na₂SO₄","Dil H₂SO₄","Conc H₂SO₄"], ans:3 },
     {q:"SN1 & SN2 statements:",o:["Both wrong","Both correct","I wrong","II wrong"], ans:1 },
     {q:"Vitamin acid:",o:["Adipic","Ascorbic","Saccharic","Aspartic"], ans:1 },
     {q:"Correct matching:",o:["Option1","Option2","Option3","Option4"], ans:0 },
     {q:"False statement in radioactive decay:",o:["Temp dependent","1/8 remains","Independent","Half-life formula"], ans:0 },
     {q:"Correct reaction products:",o:["1","2","3","4"], ans:2 },
     {q:"Number of stereoisomers:",o:["2","1","4","3"], ans:3 },
     {q:"Equilibrium constant Kp:",o:["1.8","0.3","3","0.18"], ans:0 },
     {q:"Mass of Al deposited:",o:["1.66","0.336","0.441","1.007"], ans:1 },
     {q:"Correct IUPAC name:",o:["Opt1","Opt2","Opt3","Opt4"], ans:2 },
     {q:"Complex with zero CFSE:",o:["1","2","3","4"], ans:3 },
     {q:"Boiling point order:",o:["1","2","3","4"], ans:3 },
     {q:"Geometry & oxidation states:",o:["1","2","3","4"], ans:2 },
     {q:"Number of linear molecules:",o:["4","5","6","7"], ans:2 },
     {q:"Time for 50% isomerisation:",o:["60","69","72","80"], ans:1 },
     {q:"Molar mass of product:",o:["140","150","154","160"], ans:2 },
     {q:"Volume of CO₂ container:",o:["40","45","50","55"], ans:1 },
     {q:"Percentage of Cl (Carius method):",o:["18","20","22","25"], ans:1 }
   ];


    // state array per question: 0-not visited,1-not answered,2-answered,3-marked for review,4-answered+marked
    const state = new Array(questions.length).fill(0);
    const response = new Array(questions.length).fill(null);
    let idx = 0;

    // render palette grid
    function renderPalette(){
      const grid = document.getElementById('paletteGrid'); grid.innerHTML='';
      for(let i=0;i<questions.length;i++){
        const cell = document.createElement('div');
        cell.className = 'cell ' + stateClass(state[i]);
        cell.innerText = i+1;
        cell.onclick = (()=>{return ()=>{goTo(i);}})();
        grid.appendChild(cell);
      }
    }
    function stateClass(s){
      switch(s){
        case 0: return 'not-visited';
        case 1: return 'not-answered';
        case 2: return 'answered';
        case 3: return 'marked';
        case 4: return 'ans-marked';
        default: return '';
      }
    }

    function loadQuestion(i){
      document.getElementById('qIndex').innerText = i+1;
      document.getElementById('questionText').innerText = questions[i].q;
      const opts = document.getElementById('options'); opts.innerHTML='';
      questions[i].o.forEach((opt,j)=>{
        const div = document.createElement('label'); div.className='option';
        div.innerHTML = `<input type=radio name=opt value=${j} ${response[i]===j? 'checked':''}> <div>${opt}</div>`;
        div.onclick = ()=>{ selectOption(j); };
        opts.appendChild(div);
      });

      // mark visited if first time
      if(state[i]===0) state[i]=1;
      renderPalette();
    }

    function selectOption(j){
      response[idx] = j;
      // if marked for review previously, keep it as ans-marked else answered
      if(state[idx]===3) state[idx]=4; else state[idx]=2;
      renderPalette();
      // reflect selection visually by checking the radio
      const radios = document.getElementsByName('opt');
      for(const r of radios){ if(parseInt(r.value)===j) r.checked=true; else r.checked=false; }
    }

    function saveAndNext(){ if(response[idx]!==null){ state[idx]=2 } else { state[idx]=1 }
      nextQ(); }
    function saveMarkForReview(){ if(response[idx]!==null) state[idx]=4; else state[idx]=3; nextQ(); }
    function markForReviewNext(){ state[idx] = (response[idx]!==null)?4:3; nextQ(); }
    function clearResponse(){ response[idx]=null; state[idx]=1; loadQuestion(idx); }

    function prevQ(){ if(idx>0) { idx--; loadQuestion(idx); } }
    function nextQ(){ if(idx<questions.length-1){ idx++; loadQuestion(idx);} else { alert('End of test'); } }
    function goTo(i){ idx=i; loadQuestion(idx); }

    function submitTest(){
      let score = 0;
      let attempted = 0;

      for(let i = 0; i < questions.length; i++){
        if(response[i] !== null){
          attempted++;
          if(response[i] === questions[i].ans){
            score += 4;
          } else {
            score -= 1;
          }
        }
      }

      document.getElementById('scoreBox').innerText =
        `Attempted: ${attempted} / ${questions.length}\nScore: ${score}`;

      document.getElementById('result').style.display = 'flex';
    }
    function closeResult(){ document.getElementById('result').style.display='none'; }

    function viewInstructions(){ alert('Follow test rules:\n- 180 minutes\n- No switching tabs\n- Rough paper allowed') }

    // timer (3 hours)
    let totalSeconds = 3*60*60; // change as needed
    function startTimer(){
      const t = setInterval(()=>{
        if(totalSeconds<=0){ clearInterval(t); submitTest(); return; }
        totalSeconds--;
        const h = Math.floor(totalSeconds/3600); const m = Math.floor((totalSeconds%3600)/60); const s = totalSeconds%60;
        document.getElementById('timer').innerText = `${pad(h)}:${pad(m)}:${pad(s)}`;
      },1000);
    }
    function pad(n){ return n<10?('0'+n):n; }

    // full-screen & visibility change handling
    let warningCount = 0;
    function showOverlay(){ document.getElementById('overlay').style.display='flex'; warningCount++; if(warningCount>=3){ // auto submit after 3 warnings
        setTimeout(()=>{ alert('You have exceeded allowed warnings. Test will be submitted.'); submitTest(); },500);
      }}
    function continueTest(){ document.getElementById('overlay').style.display='none'; }
    function leaveTest(){ alert('You chose to leave — test will be submitted'); submitTest(); }

    document.addEventListener('visibilitychange', ()=>{ if(document.hidden) showOverlay(); });
    document.addEventListener('fullscreenchange', ()=>{ if(!document.fullscreenElement) showOverlay(); });

    // init
    renderPalette(); loadQuestion(0); startTimer();

    // expose some functions for buttons used inline
    window.saveAndNext = saveAndNext; window.clearResponse = clearResponse; window.saveMarkForReview = saveMarkForReview;
    window.markForReviewNext = markForReviewNext; window.prevQ = prevQ; window.nextQ = nextQ; window.submitTest = submitTest;
    window.continueTest = continueTest; window.leaveTest = leaveTest;
  </script>
</body>
</html>